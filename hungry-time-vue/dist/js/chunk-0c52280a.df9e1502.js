(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c52280a"],{"159b":function(t,n,e){var i=e("da84"),o=e("fdbc"),a=e("17c2"),r=e("9112");for(var s in o){var c=i[s],u=c&&c.prototype;if(u&&u.forEach!==a)try{r(u,"forEach",a)}catch(f){u.forEach=a}}},"16e5":function(t,n,e){"use strict";e.r(n);var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("section",{staticClass:"container"},[0===t.prenotazioniConfermate.length&&0===t.prenotazioniInAttesa.length?e("div",{staticClass:"row"},[e("h1",{attrs:{align:"center"}},[t._v("NON CI SONO PRENOTAZIONI")])]):t._e(),t.prenotazioniConfermate.length>0?e("div",{staticClass:"row"},[e("h1",{attrs:{align:"center"}},[t._v("PRENOTAZIONI CONFERMATE")]),e("div",{staticClass:"col-md-3 col-sm-8"},[e("div",{staticClass:"inline"},t._l(t.giorniConfermate,(function(n){return e("button",{key:t.giorniConfermate.indexOf(n),staticClass:"btn-danger",class:{"section-btn":n.premuto},on:{click:function(e){return t.cambiaGiornoConfermate(n)}}},[t._v(" "+t._s(n.data)+" ")])})),0),e("div",{staticClass:"footer-info"},[e("div",{staticClass:"section-title"},[e("h3",{staticClass:"wow fadeInUp",attrs:{"data-wow-delay":"0.2s"}},[t._v("DETTAGLI TAVOLO")]),e("table",[t._m(0),t._l(t.prenotazioniGiornoCorrente,(function(n){return e("tr",{key:t.prenotazioniGiornoCorrente.indexOf(n)},[e("td",[t._v(t._s(n.data))]),e("td",[t._v(t._s(n.numero_persone))]),e("td",[e("button",{staticClass:"section-btn",on:{click:function(e){return t.recuperaPiattiPrenotazioneConfermata(n)}}},[t._v(" visualizza piatti ")])])])}))],2)])])]),e("div",{staticClass:"col-md-3 col-sm-8"}),t.mostraPiattiConfermate?e("div",{staticClass:"col-md-3 col-sm-8"},[e("div",{staticClass:"footer-info"},[e("div",{staticClass:"section-title"},[e("h3",{staticClass:"wow fadeInUp",attrs:{"data-wow-delay":"0.2s"}},[t._v("PIATTI PRENOTAZIONE SELEZIONATA")]),t._l(t.persone,(function(n){return e("ul",{key:t.persone.indexOf(n)},[e("strong",{staticClass:"persona"},[t._v("PERSONA "+t._s(t.persone.indexOf(n)+1))]),t._l(n,(function(i){return e("li",{key:n.indexOf(i)},[e("strong",[t._v(t._s(i))])])})),e("br")],2)})),e("div",{attrs:{align:"right"}},[e("button",{staticClass:"btn-success",on:{click:t.concludiPrenotazione}},[t._v("conclusa")])])],2)])]):t._e()]):t._e(),t.prenotazioniInAttesa.length>0?e("div",{staticClass:"row"},[e("h1",{attrs:{align:"center"}},[t._v("PRENOTAZIONI IN ATTESA")]),e("div",{staticClass:"col-md-3 col-sm-8"},[e("div",{staticClass:"inline"},t._l(t.giorniPending,(function(n){return e("button",{key:t.giorniPending.indexOf(n),staticClass:"btn-danger",class:{"section-btn":n.premuto},on:{click:function(e){return t.cambiaGiornoPending(n)}}},[t._v(" "+t._s(n.data)+" ")])})),0),e("div",{staticClass:"footer-info"},[e("div",{staticClass:"section-title"},[e("h3",{staticClass:"wow fadeInUp",attrs:{"data-wow-delay":"0.2s"}},[t._v("DETTAGLI TAVOLO")]),e("table",[t._m(1),t._l(t.prenotazioniGiornoCorrentePending,(function(n){return e("tr",{key:t.prenotazioniGiornoCorrentePending.indexOf(n)},[e("td",[t._v(t._s(n.data))]),e("td",[t._v(t._s(n.numero_persone))]),e("td",[e("button",{staticClass:"section-btn",on:{click:function(e){return t.recuperaPiattiPrenotazionePending(n)}}},[t._v(" visualizza piatti ")])])])}))],2)])])]),e("div",{staticClass:"col-md-3 col-sm-8"}),t.mostraPiattiPending?e("div",{staticClass:"col-md-3 col-sm-8"},[e("div",{staticClass:"footer-info"},[e("div",{staticClass:"section-title"},[e("h3",{staticClass:"wow fadeInUp",attrs:{"data-wow-delay":"0.2s"}},[t._v("PIATTI PRENOTAZIONE SELEZIONATA")]),t._l(t.persone,(function(n){return e("ul",{key:t.persone.indexOf(n)},[e("strong",{staticClass:"persona"},[t._v("PERSONA "+t._s(t.persone.indexOf(n)+1))]),t._l(n,(function(i){return e("li",{key:n.indexOf(i)},[e("strong",[t._v(t._s(i))])])})),e("br")],2)})),e("div",{attrs:{align:"right"}},[e("button",{staticClass:"btn-success",on:{click:t.accettaPrenotazione}},[t._v("accetta")]),e("button",{staticClass:"btn-danger",on:{click:t.rifiutaPrenotazione}},[t._v("rifiuta")])])],2)])]):t._e(),t._v(" "+t._s(t.prova)+" ")]):t._e()])},o=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("tr",[e("td",[e("h3",[t._v("Orario")])]),e("td",[e("h3",[t._v("coperti")])]),e("td",[e("h3",[t._v("Azione")])])])},function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("tr",[e("td",[e("h3",[t._v("Orario")])]),e("td",[e("h3",[t._v("coperti")])]),e("td",[e("h3",[t._v("Azione")])])])}],a=(e("4160"),e("a9e3"),e("d3b7"),e("25f0"),e("159b"),e("de93")),r=e("fc2d"),s=e("8055"),c=e.n(s),u=c.a.connect("http://192.168.1.171:4000"),f={name:"gestione-ristorante",data:function(){return{prenotazioniConfermate:[],prenotazioniInAttesa:[],mostraPiattiConfermate:!1,mostraPiattiPending:!1,piattiPrenotazione:[],persone:[],idPrenotazioneCorrente:null,giorniConfermate:[],giorniPending:[],prenotazioniGiornoCorrente:[],prenotazioniGiornoCorrentePending:[],prova:""}},beforeRouteLeave:function(t,n,e){u.emit("disconnect"),e()},created:function(){this.aggiornaPrenotazioni()},mounted:function(){this.recuperaPrenotazioniConfermate(),this.recuperaPrenotazioniInAttesa()},methods:{aggiornaPrenotazioni:function(){var t=this;u.on("prenotazione",(function(n){console.log("ricevuto"),n.idRistorante===Number(t.$route.params.IDristorante)&&(console.log("dentro if"),t.prova="nuova prenotazione",t.recuperaPrenotazioniInAttesa())}))},recuperaPrenotazioniConfermate:function(){var t=this;this.prenotazioniConfermate=[],this.giorniConfermate=[];var n=!1,e={weekday:"long",month:"2-digit",day:"2-digit"};a["a"].getAccettateByIdRistorante(this.$route.params.IDristorante).then((function(i){if(i.data.length>0){var o=i.data;o.forEach((function(i){var o=new Date(i.data);t.giorniConfermate.forEach((function(t){t.data===o.toLocaleString("it-IT",e)&&(n=!0)})),n||t.giorniConfermate.push({data:o.toLocaleString("it-IT",e),premuto:!1}),t.prenotazioniConfermate.push({id:i.id,data:o.toLocaleTimeString(),dataCompleta:o.toString(),numero_persone:i.numero_persone}),n=!1})),t.cambiaGiornoConfermate(t.giorniConfermate[0])}}))},recuperaPrenotazioniInAttesa:function(){var t=this;this.prenotazioniInAttesa=[],this.giorniPending=[];var n=!1,e={weekday:"long",month:"2-digit",day:"2-digit"};a["a"].getPendingByIdRistorante(this.$route.params.IDristorante).then((function(i){if(i.data.length>0){var o=i.data;o.forEach((function(i){var o=new Date(i.data);t.giorniPending.forEach((function(t){t.data===o.toLocaleString("it-IT",e)&&(n=!0)})),n||t.giorniPending.push({data:o.toLocaleString("it-IT",e),premuto:!1}),t.prenotazioniInAttesa.push({id:i.id,data:o.toLocaleTimeString(),dataCompleta:o.toString(),numero_persone:i.numero_persone}),n=!1})),t.cambiaGiornoPending(t.giorniPending[0])}}))},recuperaPiattiPrenotazioneConfermata:function(t){var n=this;this.idPrenotazioneCorrente=t.id,this.mostraPiattiPending=!1,this.persone=[];for(var e=0;e<t.numero_persone;e+=1)this.persone.push([]);r["a"].getByIdPrenotazione(t.id).then((function(t){t.data.forEach((function(t){n.persone[t.prenotazione_piatto.persona-1].push(t.nome)}))})),this.mostraPiattiConfermate=!0},recuperaPiattiPrenotazionePending:function(t){var n=this;this.idPrenotazioneCorrente=t.id,this.mostraPiattiConfermate=!1,this.persone=[];for(var e=0;e<t.numero_persone;e+=1)this.persone.push([]);r["a"].getByIdPrenotazione(t.id).then((function(t){t.data.forEach((function(t){n.persone[t.prenotazione_piatto.persona-1].push(t.nome)}))})),this.mostraPiattiPending=!0},accettaPrenotazione:function(){var t=this;a["a"].updatePrenotazione(this.idPrenotazioneCorrente,{accettata:!0}).then((function(n){console.log(n.data),t.mostraPiattiPending=!1,t.recuperaPrenotazioniConfermate(),t.recuperaPrenotazioniInAttesa(),u.emit("accetta-prenotazione")}))},rifiutaPrenotazione:function(){var t=this;a["a"].updatePrenotazione(this.idPrenotazioneCorrente,{rifiutata:!0}).then((function(n){console.log(n.data),t.mostraPiattiPending=!1,t.recuperaPrenotazioniInAttesa(),u.emit("rifiuta-prenotazione")}))},concludiPrenotazione:function(){var t=this;a["a"].updatePrenotazione(this.idPrenotazioneCorrente,{conclusa:!0}).then((function(n){console.log(n.data),t.mostraPiattiConfermate=!1,t.recuperaPrenotazioniConfermate()}))},cambiaGiornoConfermate:function(t){var n=this,e={weekday:"long",month:"2-digit",day:"2-digit"};this.giorniConfermate.forEach((function(t){t.premuto=!1})),t.premuto=!0,this.prenotazioniGiornoCorrente=[],this.prenotazioniConfermate.forEach((function(i){new Date(i.dataCompleta).toLocaleString("it-IT",e)===t.data&&n.prenotazioniGiornoCorrente.push(i)}))},cambiaGiornoPending:function(t){var n=this,e={weekday:"long",month:"2-digit",day:"2-digit"};this.giorniPending.forEach((function(t){t.premuto=!1})),t.premuto=!0,this.prenotazioniGiornoCorrentePending=[],this.prenotazioniInAttesa.forEach((function(i){new Date(i.dataCompleta).toLocaleString("it-IT",e)===t.data&&n.prenotazioniGiornoCorrentePending.push(i)}))}}},d=f,l=(e("4650"),e("2877")),p=Object(l["a"])(d,i,o,!1,null,"5ae3a970",null);n["default"]=p.exports},"17c2":function(t,n,e){"use strict";var i=e("b727").forEach,o=e("a640"),a=e("ae40"),r=o("forEach"),s=a("forEach");t.exports=r&&s?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},"25f0":function(t,n,e){"use strict";var i=e("6eeb"),o=e("825a"),a=e("d039"),r=e("ad6d"),s="toString",c=RegExp.prototype,u=c[s],f=a((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),d=u.name!=s;(f||d)&&i(RegExp.prototype,s,(function(){var t=o(this),n=String(t.source),e=t.flags,i=String(void 0===e&&t instanceof RegExp&&!("flags"in c)?r.call(t):e);return"/"+n+"/"+i}),{unsafe:!0})},4160:function(t,n,e){"use strict";var i=e("23e7"),o=e("17c2");i({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},4650:function(t,n,e){"use strict";var i=e("548d"),o=e.n(i);o.a},"548d":function(t,n,e){},5899:function(t,n){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,n,e){var i=e("1d80"),o=e("5899"),a="["+o+"]",r=RegExp("^"+a+a+"*"),s=RegExp(a+a+"*$"),c=function(t){return function(n){var e=String(i(n));return 1&t&&(e=e.replace(r,"")),2&t&&(e=e.replace(s,"")),e}};t.exports={start:c(1),end:c(2),trim:c(3)}},"65f0":function(t,n,e){var i=e("861d"),o=e("e8b5"),a=e("b622"),r=a("species");t.exports=function(t,n){var e;return o(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!o(e.prototype)?i(e)&&(e=e[r],null===e&&(e=void 0)):e=void 0),new(void 0===e?Array:e)(0===n?0:n)}},7156:function(t,n,e){var i=e("861d"),o=e("d2bb");t.exports=function(t,n,e){var a,r;return o&&"function"==typeof(a=n.constructor)&&a!==e&&i(r=a.prototype)&&r!==e.prototype&&o(t,r),t}},a640:function(t,n,e){"use strict";var i=e("d039");t.exports=function(t,n){var e=[][t];return!!e&&i((function(){e.call(null,n||function(){throw 1},1)}))}},a9e3:function(t,n,e){"use strict";var i=e("83ab"),o=e("da84"),a=e("94ca"),r=e("6eeb"),s=e("5135"),c=e("c6b6"),u=e("7156"),f=e("c04e"),d=e("d039"),l=e("7c73"),p=e("241c").f,g=e("06cf").f,h=e("9bf2").f,v=e("58a8").trim,m="Number",C=o[m],P=C.prototype,_=c(l(P))==m,z=function(t){var n,e,i,o,a,r,s,c,u=f(t,!1);if("string"==typeof u&&u.length>2)if(u=v(u),n=u.charCodeAt(0),43===n||45===n){if(e=u.charCodeAt(2),88===e||120===e)return NaN}else if(48===n){switch(u.charCodeAt(1)){case 66:case 98:i=2,o=49;break;case 79:case 111:i=8,o=55;break;default:return+u}for(a=u.slice(2),r=a.length,s=0;s<r;s++)if(c=a.charCodeAt(s),c<48||c>o)return NaN;return parseInt(a,i)}return+u};if(a(m,!C(" 0o1")||!C("0b1")||C("+0x1"))){for(var I,b=function(t){var n=arguments.length<1?0:t,e=this;return e instanceof b&&(_?d((function(){P.valueOf.call(e)})):c(e)!=m)?u(new C(z(n)),e,b):z(n)},y=i?p(C):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;y.length>E;E++)s(C,I=y[E])&&!s(b,I)&&h(b,I,g(C,I));b.prototype=P,P.constructor=b,r(o,m,b)}},ad6d:function(t,n,e){"use strict";var i=e("825a");t.exports=function(){var t=i(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.dotAll&&(n+="s"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}},b727:function(t,n,e){var i=e("0366"),o=e("44ad"),a=e("7b0b"),r=e("50c4"),s=e("65f0"),c=[].push,u=function(t){var n=1==t,e=2==t,u=3==t,f=4==t,d=6==t,l=5==t||d;return function(p,g,h,v){for(var m,C,P=a(p),_=o(P),z=i(g,h,3),I=r(_.length),b=0,y=v||s,E=n?y(p,I):e?y(p,0):void 0;I>b;b++)if((l||b in _)&&(m=_[b],C=z(m,b,P),t))if(n)E[b]=C;else if(C)switch(t){case 3:return!0;case 5:return m;case 6:return b;case 2:c.call(E,m)}else if(f)return!1;return d?-1:u||f?f:E}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6)}},c427:function(t,n,e){"use strict";var i=e("bc3a"),o=e.n(i);n["a"]=o.a.create({baseURL:"http://localhost:8080/api",headers:{"Content-type":"application/json"}})},de93:function(t,n,e){"use strict";var i=e("d4ec"),o=e("bee2"),a=e("c427"),r=function(){function t(){Object(i["a"])(this,t)}return Object(o["a"])(t,[{key:"getByIdRistorante",value:function(t){return a["a"].get("/tavoli/".concat(t))}},{key:"getAccettateByIdRistorante",value:function(t){return a["a"].get("/tavoli/".concat(t,"/accettate"))}},{key:"getPendingByIdRistorante",value:function(t){return a["a"].get("tavoli/".concat(t,"/pending"))}},{key:"prenotaTavolo",value:function(t){return a["a"].post("/tavolo/prenota",t)}},{key:"updatePrenotazione",value:function(t,n){return a["a"].put("/tavolo/".concat(t,"/aggiorna"),n)}}]),t}();n["a"]=new r},e8b5:function(t,n,e){var i=e("c6b6");t.exports=Array.isArray||function(t){return"Array"==i(t)}},fc2d:function(t,n,e){"use strict";var i=e("d4ec"),o=e("bee2"),a=e("c427"),r=function(){function t(){Object(i["a"])(this,t)}return Object(o["a"])(t,[{key:"creaPrenotazionePiatto",value:function(t){return a["a"].post("/prenotazione/piatti",t)}},{key:"getByIdPrenotazione",value:function(t){return a["a"].get("/".concat(t,"/piattiPrenotazione"))}}]),t}();n["a"]=new r},fdbc:function(t,n){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-0c52280a.df9e1502.js.map