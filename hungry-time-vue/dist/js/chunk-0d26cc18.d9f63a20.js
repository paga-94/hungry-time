(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d26cc18"],{2532:function(e,r,t){"use strict";var s=t("23e7"),a=t("5a34"),n=t("1d80"),o=t("ab13");s({target:"String",proto:!0,forced:!o("includes")},{includes:function(e){return!!~String(n(this)).indexOf(a(e),arguments.length>1?arguments[1]:void 0)}})},"25f0":function(e,r,t){"use strict";var s=t("6eeb"),a=t("825a"),n=t("d039"),o=t("ad6d"),i="toString",u=RegExp.prototype,d=u[i],l=n((function(){return"/a/b"!=d.call({source:"a",flags:"b"})})),c=d.name!=i;(l||c)&&s(RegExp.prototype,i,(function(){var e=a(this),r=String(e.source),t=e.flags,s=String(void 0===t&&e instanceof RegExp&&!("flags"in u)?o.call(e):t);return"/"+r+"/"+s}),{unsafe:!0})},"44e7":function(e,r,t){var s=t("861d"),a=t("c6b6"),n=t("b622"),o=n("match");e.exports=function(e){var r;return s(e)&&(void 0!==(r=e[o])?!!r:"RegExp"==a(e))}},"5a34":function(e,r,t){var s=t("44e7");e.exports=function(e){if(s(e))throw TypeError("The method doesn't accept regular expressions");return e}},"88ed":function(e,r,t){"use strict";t.d(r,"a",(function(){return a}));var s=t("d4ec"),a=function e(r,t,a){Object(s["a"])(this,e),this.username=r,this.email=t,this.password=a}},a436:function(e,r,t){"use strict";t.r(r);var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("h1",[e._v("Login")]),t("form",{attrs:{name:"form"},on:{submit:function(r){return r.preventDefault(),e.handleLogin(r)}}},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"username"}},[e._v("Username")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.username,expression:"user.username"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",name:"username",id:"username"},domProps:{value:e.user.username},on:{input:function(r){r.target.composing||e.$set(e.user,"username",r.target.value)}}}),e.errors.has("username")?t("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._v(" Username richiesto! ")]):e._e()]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"password"}},[e._v("Password")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"password",name:"password",id:"password"},domProps:{value:e.user.password},on:{input:function(r){r.target.composing||e.$set(e.user,"password",r.target.value)}}}),e.errors.has("password")?t("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._v(" Password richiesta! ")]):e._e()]),t("div",{staticClass:"form-group"},[t("button",{staticClass:"section-btn",attrs:{disabled:e.loading}},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"spinner-border spinner-border-sm"}),t("span",[e._v("Login")])])]),t("div",{staticClass:"form-group"},[e.message?t("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._v(e._s(e.message))]):e._e()])])])},a=[],n=(t("caad"),t("d3b7"),t("25f0"),t("2532"),t("88ed")),o={name:"loginForm",data:function(){return{user:new n["a"]("",""),loading:!1,message:""}},computed:{loggedIn:function(){return this.$store.state.auth.status.loggedIn},currentUser:function(){return this.$store.state.auth.user}},created:function(){if(this.loggedIn)if(this.currentUser.roles.includes("ROLE_UTENTE"))this.$router.push("/home");else if(this.currentUser.roles.includes("ROLE_RISTORATORE")){var e=this.currentUser.idRistorante;this.$router.push({name:"gestione-ristorante",params:{IDristorante:e}})}else if(this.currentUser.roles.includes("ROLE_MODERATORE")){var r=this.currentUser.id;this.$router.push({name:"home-moderatore",params:{idModeratore:r}})}},methods:{handleLogin:function(){var e=this;this.loading=!0,this.$validator.validateAll().then((function(r){r?e.user.username&&e.user.password&&e.$store.dispatch("auth/login",e.user).then((function(){if(e.currentUser.roles.includes("ROLE_UTENTE"))e.$router.push("/home");else if(e.currentUser.roles.includes("ROLE_RISTORATORE")){var r=e.currentUser.idRistorante;e.$router.push({name:"gestione-ristorante",params:{IDristorante:r}})}else if(e.currentUser.roles.includes("ROLE_MODERATORE")){var t=e.currentUser.id;e.$router.push({name:"home-moderatore",params:{idModeratore:t}})}}),(function(r){e.loading=!1,e.message=r.response&&r.response.data||r.message||r.toString()})):e.loading=!1}))}}},i=o,u=t("2877"),d=Object(u["a"])(i,s,a,!1,null,"586b25dc",null);r["default"]=d.exports},ab13:function(e,r,t){var s=t("b622"),a=s("match");e.exports=function(e){var r=/./;try{"/./"[e](r)}catch(t){try{return r[a]=!1,"/./"[e](r)}catch(s){}}return!1}},ad6d:function(e,r,t){"use strict";var s=t("825a");e.exports=function(){var e=s(this),r="";return e.global&&(r+="g"),e.ignoreCase&&(r+="i"),e.multiline&&(r+="m"),e.dotAll&&(r+="s"),e.unicode&&(r+="u"),e.sticky&&(r+="y"),r}}}]);
//# sourceMappingURL=chunk-0d26cc18.d9f63a20.js.map